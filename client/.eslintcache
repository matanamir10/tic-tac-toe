[{"C:\\repo\\tic tac toe\\client\\src\\index.js":"1","C:\\repo\\tic tac toe\\client\\src\\containers\\App\\App.js":"2","C:\\repo\\tic tac toe\\client\\src\\containers\\Game\\Game.js":"3","C:\\repo\\tic tac toe\\client\\src\\components\\Board\\Board.js":"4","C:\\repo\\tic tac toe\\client\\src\\components\\Square\\Square.js":"5","C:\\repo\\tic tac toe\\client\\src\\components\\MatchDetails\\MatchDetails.js":"6","C:\\repo\\tic tac toe\\client\\src\\models\\Square.js":"7","C:\\repo\\tic tac toe\\client\\src\\ErrorBoundary\\ErrorBoundary.js":"8","C:\\repo\\tic tac toe\\client\\src\\context\\Oponent.js":"9","C:\\repo\\tic tac toe\\client\\src\\constants\\Player.js":"10","C:\\repo\\tic tac toe\\client\\src\\constants\\WinningOptions.js":"11","C:\\repo\\tic tac toe\\client\\src\\socket.js":"12","C:\\repo\\tic tac toe\\client\\src\\containers\\Setup\\Setup.js":"13","C:\\repo\\tic tac toe\\client\\src\\hoc\\withWindowReload.js":"14"},{"size":527,"mtime":1608371959697,"results":"15","hashOfConfig":"16"},{"size":1124,"mtime":1608371495743,"results":"17","hashOfConfig":"16"},{"size":3360,"mtime":1608371486523,"results":"18","hashOfConfig":"16"},{"size":1391,"mtime":1608331341508,"results":"19","hashOfConfig":"16"},{"size":516,"mtime":1608369094536,"results":"20","hashOfConfig":"16"},{"size":555,"mtime":1608329572694,"results":"21","hashOfConfig":"16"},{"size":157,"mtime":1608290748473,"results":"22","hashOfConfig":"16"},{"size":555,"mtime":1608331121891,"results":"23","hashOfConfig":"16"},{"size":841,"mtime":1608326404494,"results":"24","hashOfConfig":"16"},{"size":49,"mtime":1608290748462,"results":"25","hashOfConfig":"16"},{"size":167,"mtime":1608290748466,"results":"26","hashOfConfig":"16"},{"size":354,"mtime":1608328322783,"results":"27","hashOfConfig":"16"},{"size":1194,"mtime":1608370382280,"results":"28","hashOfConfig":"16"},{"size":395,"mtime":1608371809278,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"3z0b8z",{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"34"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50","usedDeprecatedRules":"34"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\repo\\tic tac toe\\client\\src\\index.js",[],"C:\\repo\\tic tac toe\\client\\src\\containers\\App\\App.js",[],["61","62"],"C:\\repo\\tic tac toe\\client\\src\\containers\\Game\\Game.js",["63","64"],"import React, { useContext, useEffect, useState } from \"react\";\r\nimport \"./Game.scss\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Board } from \"../../components/Board/Board\";\r\nimport { MatchDetails } from \"../../components/MatchDetails/MatchDetails\";\r\nimport { Square } from \"../../models/Square\";\r\nimport { OponentContext } from \"../../context/Oponent\";\r\nimport { winningOptions } from \"../../constants/WinningOptions\";\r\nimport socketConnection from \"../../socket\";\r\nimport { withWindowReload } from \"../../hoc/withWindowReload\";\r\n\r\nconst initalSquares = [];\r\nfor (let i = 0; i < 9; i++) {\r\n  initalSquares[i] = new Square(i, null, false);\r\n}\r\n\r\nlet clickedIndex = null;\r\n\r\nconst Game = () => {\r\n  const [squares, setSquares] = useState(initalSquares);\r\n  const { turn, setPlayerTurn, player, setPlayerType, setGame } = useContext(\r\n    OponentContext\r\n  );\r\n\r\n  const socket = socketConnection.getSocket();\r\n\r\n  const onSquareClicked = (index, playerType) => {\r\n    clickedIndex = index;\r\n    setSquares((prevSquares) =>\r\n      prevSquares.map((square, currIndex) => {\r\n        if (currIndex === index) {\r\n          return {\r\n            ...square,\r\n            value: playerType,\r\n            isChecked: true,\r\n          };\r\n        }\r\n        return square;\r\n      })\r\n    );\r\n  };\r\n\r\n  const checkForWin = () => {\r\n    let isWinner = null;\r\n    for (const option of winningOptions) {\r\n      const [first, second, third] = option;\r\n      isWinner =\r\n        squares[first].value &&\r\n        squares[first].value === squares[second].value &&\r\n        squares[first].value === squares[third].value\r\n          ? squares[first].value\r\n          : null;\r\n      if (isWinner) {\r\n        break;\r\n      }\r\n    }\r\n    return isWinner;\r\n  };\r\n\r\n  const checkDraw = () => {\r\n    return squares.every((sq) => sq.value !== null);\r\n  };\r\n\r\n  const notifyEndOfGame = () => {\r\n    socket.emit(\"endGame\");\r\n    setPlayerTurn(false);\r\n  };\r\n\r\n  const closeGame = () => {\r\n    setGame(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"turn\", turn);\r\n    console.log(\"squares\", squares);\r\n\r\n    if (turn) {\r\n      setPlayerTurn(false);\r\n      socket.emit(\"move\", clickedIndex);\r\n    }\r\n\r\n    let winner = checkForWin();\r\n    if (winner || checkDraw()) {\r\n      if (winner) {\r\n        notifyEndOfGame();\r\n        toast.info(`The winner is: ${winner}`, {\r\n          autoClose: 3000,\r\n          onClose: closeGame,\r\n        });\r\n      } else {\r\n        notifyEndOfGame();\r\n        toast.info(\"Great draw\", {\r\n          autoClose: 3000,\r\n          onClose: closeGame,\r\n        });\r\n      }\r\n    }\r\n  }, [squares]);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"player\", (player) => {\r\n      setPlayerType(player);\r\n    });\r\n\r\n    socket.on(\"act\", () => {\r\n      setPlayerTurn(true);\r\n    });\r\n\r\n    socket.on(\"updateBoard\", (data) => {\r\n      onSquareClicked(data.index, data.player);\r\n    });\r\n\r\n    socket.on(\"leave\", () => {\r\n      // toast.info(\"Oponent leaved\");\r\n      // closeGame();\r\n    });\r\n\r\n    socket.emit(\"ready\");\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"game\">\r\n      <MatchDetails />\r\n      <Board\r\n        disabled={!turn}\r\n        squares={squares}\r\n        player={player}\r\n        onSquareClicked={onSquareClicked}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withWindowReload(Game);\r\n","C:\\repo\\tic tac toe\\client\\src\\components\\Board\\Board.js",[],"C:\\repo\\tic tac toe\\client\\src\\components\\Square\\Square.js",[],"C:\\repo\\tic tac toe\\client\\src\\components\\MatchDetails\\MatchDetails.js",[],"C:\\repo\\tic tac toe\\client\\src\\models\\Square.js",[],"C:\\repo\\tic tac toe\\client\\src\\ErrorBoundary\\ErrorBoundary.js",[],"C:\\repo\\tic tac toe\\client\\src\\context\\Oponent.js",["65"],"import React, { useState } from \"react\";\r\nimport { Player } from \"../constants/Player\";\r\n\r\nexport const OponentContext = React.createContext();\r\n\r\nexport const OponentProvider = (props) => {\r\n  const [isGameAvailable, setIsGameAvaliable] = useState(false);\r\n  const [turn, setTurn] = useState(false);\r\n  const [player, setPlayer] = useState(null);\r\n\r\n  const setPlayerTurn = (myTurn) => setTurn(myTurn);\r\n\r\n  const setGame = (state) => setIsGameAvaliable(state);\r\n\r\n  const setPlayerType = (type) => {\r\n    console.log(\"Player type is:\", type);\r\n    setPlayer(type);\r\n  };\r\n\r\n  return (\r\n    <OponentContext.Provider\r\n      value={{\r\n        turn,\r\n        setPlayerTurn,\r\n        player,\r\n        setPlayerType,\r\n        isGameAvailable,\r\n        setGame,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </OponentContext.Provider>\r\n  );\r\n};\r\n","C:\\repo\\tic tac toe\\client\\src\\constants\\Player.js",[],"C:\\repo\\tic tac toe\\client\\src\\constants\\WinningOptions.js",[],"C:\\repo\\tic tac toe\\client\\src\\socket.js",[],"C:\\repo\\tic tac toe\\client\\src\\containers\\Setup\\Setup.js",[],"C:\\repo\\tic tac toe\\client\\src\\hoc\\withWindowReload.js",[],{"ruleId":"66","replacedBy":"67"},{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","severity":1,"message":"71","line":98,"column":6,"nodeType":"72","endLine":98,"endColumn":15,"suggestions":"73"},{"ruleId":"70","severity":1,"message":"74","line":123,"column":6,"nodeType":"72","endLine":123,"endColumn":8,"suggestions":"75"},{"ruleId":"76","severity":1,"message":"77","line":2,"column":10,"nodeType":"78","messageId":"79","endLine":2,"endColumn":16},"no-native-reassign",["80"],"no-negated-in-lhs",["81"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'checkDraw', 'checkForWin', 'closeGame', 'notifyEndOfGame', 'setPlayerTurn', 'socket', and 'turn'. Either include them or remove the dependency array.","ArrayExpression",["82"],"React Hook useEffect has missing dependencies: 'setPlayerTurn', 'setPlayerType', and 'socket'. Either include them or remove the dependency array.",["83"],"no-unused-vars","'Player' is defined but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation",{"desc":"84","fix":"85"},{"desc":"86","fix":"87"},"Update the dependencies array to be: [checkDraw, checkForWin, closeGame, notifyEndOfGame, setPlayerTurn, socket, squares, turn]",{"range":"88","text":"89"},"Update the dependencies array to be: [setPlayerTurn, setPlayerType, socket]",{"range":"90","text":"91"},[2596,2605],"[checkDraw, checkForWin, closeGame, notifyEndOfGame, setPlayerTurn, socket, squares, turn]",[3079,3081],"[setPlayerTurn, setPlayerType, socket]"]